<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Gestion visuelle des PNJs - Stargate SG-1</title>
  <style>
    body { font-family: sans-serif; max-width: 900px; margin: auto; padding: 2rem; }
    h1 { text-align: center; }
    .pnj { border: 1px solid #ccc; padding: 1rem; margin-bottom: 1rem; display: flex; align-items: center; }
    .pnj img { max-width: 100px; max-height: 100px; margin-right: 1rem; border-radius: 5px; }
    .pnj span { font-weight: bold; font-size: 1.1rem; }
    .pnj button { margin-left: auto; }
  </style>
</head>
<body>
  <h1>👨‍🚀 Gestion des visuels PNJ - Stargate Commande</h1>
  <div id="liste">Chargement des PNJ...</div>

  <script>
    const repo = "Albator2570/stargate-pnj-assets";
    const baseCDN = "https://cdn.jsdelivr.net/gh/" + repo + "/images/pnj/";
    const pnjJsonUrl = "https://cdn.jsdelivr.net/gh/" + repo + "/pnj.json";

    fetch(pnjJsonUrl)
      .then(response => response.json())
      .then(data => {
        const liste = document.getElementById("liste");
        liste.innerHTML = "";

        for (const [nom, infos] of Object.entries(data)) {
          const div = document.createElement("div");
          div.classList.add("pnj");

          const image = document.createElement("img");
          image.src = infos.image_url && infos.image_url !== "default" ? infos.image_url : baseCDN + "default.png";

          const span = document.createElement("span");
          span.innerText = nom;

          const status = document.createElement("p");
          status.innerText = infos.image_url && infos.image_url !== "default" ? "✅ Image ok" : "🚫 Pas d’image";

          div.appendChild(image);
          div.appendChild(span);
          div.appendChild(status);
          liste.appendChild(div);
        }
      })
      .catch(error => {
        document.getElementById("liste").innerText = "Erreur de chargement de pnj.json 😥";
        console.error(error);
      });
  </script>
</body>
</html>